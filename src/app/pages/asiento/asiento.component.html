<div class="container-principal">
    <aside class="animated fadeIn fast">
        <app-aside></app-aside>
    </aside>

<div class="container nuevacuenta animated fadeIn fast">

    <div class="bloque-float animated fadeIn fast">
        <h1>Asiento nuevo</h1>
        <button routerLink="/mi-espacio" class="btn-sinfondo puntero">
            <span>Atrás</span><i class="fa-solid fa-circle-arrow-left"></i>
        </button>
    </div>

    <div class="animated fadeIn fast info-cuenta bloque-content">

        <form [formGroup]="movimiento" (ngSubmit)="guardarMovimiento()">

        <div class="col">

            <div class="flex-w cabecera-asiento">

                <div class="asiento">
                    <label>Asiento</label>
                    <input class="caja-formulario" type="text"
                            formControlName="asiento">
                </div>
                    
                <div class="fecha content-flex">
                    <label>Fecha de asiento</label>
                    <div class="fecha-asiento content-flex">
                        <select class="caja-formulario"
                                formControlName="dia">
                                <option value="" selected disabled>día</option>
                                <option *ngFor="let dia of dias"> {{ dia }} </option>
                        </select>
                        <select class="caja-formulario" 
                                formControlName="mes"
                                (change)="mes( mesSeleccionado.value )"
                                #mesSeleccionado>
                                <option value="" selected disabled>Mes</option>
                                <option *ngFor="let mes of meses" [value]="mes"> {{ mes }} </option>
                        </select>
                        <select class="caja-formulario"
                                formControlName="anyo">
                                <option [ngValue]="anyo"> {{ anyo }}</option>
                        </select>
                    </div>
                </div>

            </div>
            <small *ngIf="fechaNoValido" class="animated fadeIn fast">
                Debes introducir la fecha correcta
            </small>

            <label>Tipo de movimiento</label>
            <div class="radiobutton">
                <ul>
                    <li>
                        <input class="radio" type="radio" value="1"
                        formControlName="tipo"
                        (change)="tipoMovimiento( tipo1.value )"
                        #tipo1>
                        <span>Cobro directo</span>
                        <p *ngIf="mostrarCartelIngreso" class="animated fadeIn fast">Si marcas esta opción será para hacer un asiento
                            de ingreso a tu favor. Se utiliza para cobrar clientes, deudores, salarios, regalos y donaciones.
                        </p>
                    </li>
                    <li>
                        <input class="radio" type="radio" value="2"
                        formControlName="tipo"
                        (change)="tipoMovimiento( tipo2.value )"
                        #tipo2>
                        <span>Pago directo</span>
                        <p *ngIf="mostrarCartelPago" class="animated fadeIn fast">Si marcas esta opción será para anotar una salida de dinero. 
                            Se utiliza con cuentas de proveedores, acreedores, salarios, regalos y donaciones.
                        </p>
                    </li>
                    <li>
                        <input class="radio" type="radio" value="3"
                        formControlName="tipo"
                        (change)="tipoMovimiento( tipo3.value )"
                        #tipo3>
                        <span>Deuda con acreedores</span>
                        <p *ngIf="mostrarCartelDeudaA" class="animated fadeIn fast">Si marcas esta opción será para dejar a deber
                            dinero a acreedores (amigos, familiares, empresas de servicios). <strong class="bold">Se utiliza para todo lo que no sea actividad laboral.</strong> 
                        </p>
                    </li>
                    <li>
                        <input class="radio" type="radio" value="4"
                        formControlName="tipo"
                        (change)="tipoMovimiento( tipo4.value )"
                        #tipo4>
                        <span>Deuda de deudores </span>
                        <p *ngIf="mostrarCartelDeudaC" class="animated fadeIn fast">Con esta opción marcada se hará un anote
                            que reflejará una deuda contigo, es decir, te deben dinero (amigos, familiares, empresas de servicios). 
                            <strong class="bold">Se utiliza para todo lo que no sea actividad laboral.</strong>
                        </p>
                    </li>
                    <li>
                        <input class="radio" type="radio" value="5"
                        formControlName="tipo"
                        (change)="tipoMovimiento( tipo5.value )"
                        #tipo5>
                        <span>Venta a cliente</span>
                        <p *ngIf="mostrarCartelVenta" class="animated fadeIn fast">Utiliza esta opción para anotar un movimiento 
                            en el que tú hayas vendido y te haya dejado a deber algún cliente. 
                            <strong class="bold"> Se utiliza para la actividad laboral.</strong>
                        </p>
                    </li>
                    <li>
                        <input class="radio" type="radio" value="6"
                        formControlName="tipo"
                        (change)="tipoMovimiento( tipo6.value )"
                        #tipo6>
                        <span>Compra a proveedor</span>
                        <p *ngIf="mostrarCartelCompra" class="animated fadeIn fast">Utiliza esta opción para anotar un movimiento en el que tú
                            hayas dejado a deber dinero a algún proveedor. 
                            <strong class="bold"> Se utiliza para la actividad laboral.</strong>
                        </p>
                    </li>
                    <li>
                        <input class="radio" type="radio" value="8"
                        formControlName="tipo"
                        (change)="tipoMovimiento( tipo8.value )"
                        #tipo8>
                        <span>Traspaso entre cuentas</span>
                        <p *ngIf="mostrarCartelTraspaso" class="animated fadeIn fast">Utiliza esta opción para reflejar el paso de dinero 
                            de un banco a otro, o si ingresas dinero efectivo en la cuenta bancaria. 
                        </p>
                    </li>
                </ul>
            </div>
            <small *ngIf="tipoNoValido" class="animated fadeIn fast">
                Debes marcar un tipo de movimiento
            </small>

            <div class="cuentas-contables">
                <label>Cuenta</label>
                <select class="caja-formulario muylargo"
                        formControlName="cuentaContable"
                        #cuentaContable>
                        <option value="" selected disabled>Selecciona cuenta</option>
                        <option *ngFor="let cuenta of cuentasContables" [ngValue]="cuenta.id"> 
                            {{ cuenta.identificador }} / ({{ cuenta.tipo.codigo }}) {{ cuenta.nombreCuenta }} 
                        </option>
                </select>
                <small *ngIf="cuentaNoValido" class="animated fadeIn fast">
                    Debes seleccionar una cuenta
                </small>
            
                <label>Contrapartida</label>
                <select class="caja-formulario muylargo"
                        formControlName="contrapartida"
                        #contrapartida>
                        <option value="" selected disabled>Selecciona cuenta</option>
                        <option *ngFor="let cuenta of cuentasContrapartida" [ngValue]="cuenta.id"> 
                            {{ cuenta.identificador }} / ({{ cuenta.tipo.codigo }}) {{ cuenta.nombreCuenta }} 
                        </option>
                </select>
                <small *ngIf="contrapartidaNoValido" class="animated fadeIn fast">
                    Debes seleccionar una cuenta
                </small>

                <div class="radiobutton animated fadeIn fast padtop" *ngIf="cuadrarAsiento">
                    <ul>
                        <li>
                            <input class="radio" type="checkbox"
                            formControlName="cuadrar"
                            [checked]="cuadrar.value"
                            #cuadrar
                            >
                            <span>Cuadrar asiento</span>
                            <p>
                                Si marcas "cuadrar asiento" realizará un asiento automático que cuadrará
                                la cuenta de la contrapartida. Si no lo marcas y quieres que la contrapartida esté 
                                cuadrada, deberás hacerlo manual.
                            </p>
                        </li>
                    </ul>
                </div>
                
            </div>

            <label>Concepto</label>
            <input class="muylargo" type="text" maxlength="50" minlength="2" required
                    formControlName="concepto">
            <small *ngIf="conceptoNoValido" class="animated fadeIn fast">
                No puede superar los 50 caracteres y debes rellenarlo
            </small>


            <label>Cantidad</label>
            <input class="corto" type="text"  maxlength="10" minlength="1" required
                    formControlName="cantidad">
            <span> , </span>
            <input class="muycorto" type="text"  maxlength="2" minlength="2" required
                    formControlName="decimales">
            <span> {{ moneda }} </span>
            <small *ngIf="cantidadNoValido" class="animated fadeIn fast">
                Debes introducir solo números y si no tiene saldo, pon 0,00.
            </small>
            <small *ngIf="decimalesNoValido" class="animated fadeIn fast">
                2 decimales
            </small>

            <button class="btn puntero" type="submit">
                <i class="fa-solid fa-floppy-disk"></i> 
                Guardar asiento
            </button>
            
        </div>

        <div class="col-2">

            <div class="instrucciones">
                <ul>
                    <h2>Instrucciones</h2>
                    <li>
                        <strong class="bold">Asiento:</strong> El número de asiento es automático.
                    </li>
                    <li>
                        <strong class="bold">Fecha de asiento:</strong> Introduce el día y el mes en el que se hizo el movimiento,
                        el campo del año es automático.
                    </li>
                    <li>
                        <strong class="bold">Tipo de movimiento:</strong> Elige el tipo de movimiento pinchando en el check, automáticamente
                        te mostrará las cuentas que tienes disponibles y una breve descripción de en qué casos se utiliza ese movimiento. 
                        <strong class="bold">Antes de realizar un asiento asegúrate que tengas la cuenta creada</strong> .
                    </li>
                    <li>
                        <strong class="bold">Cuenta:</strong> Es la cuenta principal a la que irá el asiento.
                    </li>
                    <li>
                        <strong class="bold">Contrapartida:</strong> Es la cuenta secundaria que cuadrará el asiento.
                    </li>
                    <li>
                        <strong class="bold">Concepto:</strong> Realiza una breve descripción del movimiento. 
                        Por ejemplo: "Pago de factura 340" 
                    </li>
                    <li>
                        <strong class="bold">Cantidad:</strong> Introduce la cantidad exacta del movimiento. No puedes incluir letras y debe 
                        haber dos deciales obligatoriamente.
                    </li>
                </ul>
            </div>

        </div>
   
        </form>

    </div>

</div>

</div>
